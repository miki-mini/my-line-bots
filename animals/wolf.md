# ğŸº WOLF SHADOWING

**è‹±èªå«Œã„ã®ãŸã‚ã®ç‹¬ã‚Šè¨€ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã‚¢ãƒ—ãƒª**

æ–‡æ³•ã‚¼ãƒ­ãƒ»éŸ³ã§è¦šãˆã‚‹ã€‚è‡ªåˆ†ã®æœ¬å¿ƒã‚’è‹±èªã«ã™ã‚‹ã‹ã‚‰ã€è„³ã¸ã®å®šç€ç‡ãŒæ®µé•ã„ã€‚

[![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

[ğŸŒŸ ä»Šã™ãè©¦ã™](https://your-site-url.com) | [ğŸ“– æŠ€è¡“è¨˜äº‹](https://zenn.dev/your-article)

![WOLF SHADOWING Demo](images/demo.gif)

## ğŸ¯ ç‰¹å¾´

- **ç‹¬ã‚Šè¨€â†’è¶…è¨³**: æ—¥æœ¬èªã®æ„šç—´ã‚’ã€Gemini AIãŒè¶…ã‚¯ãƒ¼ãƒ«ãªãƒã‚¤ãƒ†ã‚£ãƒ–è‹±èªã«å¤‰æ›
- **3å›ãƒªãƒ”ãƒ¼ãƒˆå†ç”Ÿ**: è€³ã§è¦šãˆã‚‹ã¾ã§è‡ªå‹•ãƒ«ãƒ¼ãƒ—
- **ã‚ã„ã¾ã„ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°åˆ¤å®š**: 85%ä»¥ä¸Šã®é¡ä¼¼åº¦ã§OKï¼å®Œç’§ã˜ã‚ƒãªãã¦ã‚‚åˆæ ¼
- **Firestoreã‚­ãƒ£ãƒƒã‚·ãƒ¥**: åŒã˜è¨€è‘‰ãªã‚‰2å›ç›®ä»¥é™ã¯çˆ†é€Ÿï¼†ç„¡æ–™
- **ã‚·ãƒ³ãƒ—ãƒ«ãªæ“ä½œ**: ãŸã£ãŸ3ã‚¹ãƒ†ãƒƒãƒ—ã§èª°ã§ã‚‚ä½¿ãˆã‚‹

## ğŸš€ ãƒ‡ãƒ¢

### ä½¿ã„æ–¹ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

1. **ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—** â†’ ç‹¬ã‚Šè¨€ã‚’è©±ã™
2. **TRANSLATEãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—** â†’ è‹±èªã«å¤‰æ›ï¼†3å›ãƒªãƒ”ãƒ¼ãƒˆ
3. **ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—** â†’ ä¸€ç·’ã«é å ãˆï¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œä»Šæ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã€ã‚ã£ã¡ã‚ƒã†ã¾ãã„ã£ãŸï¼æœ€é«˜ã®æ°—åˆ†ï¼ã€
ã€€ã€€â†“
AI: "Today's presentation went incredibly well! I'm feeling absolutely amazing!"
ã€€ã€€â†“
ğŸ”ˆ 3å›ãƒªãƒ”ãƒ¼ãƒˆå†ç”Ÿ
ã€€ã€€â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œãƒˆã‚¥ãƒ‡ã‚¤ã‚º ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³...ã€
ã€€ã€€â†“
åˆ¤å®š: ğŸ‰ Perfect Howling! (Similarity: 92%)
```

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- Vanilla JavaScript
- Web Speech APIï¼ˆéŸ³å£°èªè­˜ï¼‰
- CSS3ï¼ˆãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰UIï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- FastAPI (Python 3.9+)
- Google Cloud Text-to-Speech (Journey Voice)
- Vertex AI Gemini 2.5 Flash
- Firestoreï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

### ä¸»è¦ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- ãƒ¬ãƒ¼ãƒ™ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³è·é›¢ï¼ˆã‚ã„ã¾ã„æ¤œç´¢ï¼‰
- SHA-256ãƒãƒƒã‚·ãƒ¥ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ï¼‰

## ğŸ“¦ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Python 3.9ä»¥ä¸Š
- Google Cloud Platform ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- ä»¥ä¸‹ã®GCP APIãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ï¼š
  - Cloud Text-to-Speech API
  - Vertex AI API
  - Firestore API

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/your-username/wolf-shadowing.git
cd wolf-shadowing
```

### 2. ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆ

```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

### 3. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
```

### 4. Google Cloudèªè¨¼

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦è¨­å®š
export GOOGLE_APPLICATION_CREDENTIALS="path/to/your-service-account-key.json"

# ã¾ãŸã¯ã€gcloud CLIã‚’ä½¿ç”¨
gcloud auth application-default login
```

### 5. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š

`.env.example`ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦`.env`ã‚’ä½œæˆã—ã€å¿…è¦ãªå€¤ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

```bash
cp .env.example .env
```

```.env
# Google Cloud Project
GCP_PROJECT_ID=your-project-id

# Firestore Collection Names
FIRESTORE_TRANSLATIONS_COLLECTION=wolf_translations
FIRESTORE_TTS_COLLECTION=wolf_tts
```

### 6. ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•

```bash
uvicorn main:app --reload
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:8000` ã‚’é–‹ãã¾ã™ã€‚

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
wolf-shadowing/
â”œâ”€â”€ main.py                 # FastAPIãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ routers/
â”‚   â””â”€â”€ butsubutsu.py      # ç¿»è¨³ãƒ»TTS APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ index.html         # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ UI
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ wolf_howl.jpg  # èƒŒæ™¯ç”»åƒ
â”œâ”€â”€ requirements.txt       # Pythonä¾å­˜é–¢ä¿‚
â”œâ”€â”€ .env.example          # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## ğŸ”§ ä¸»è¦APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### POST /api/butsubutsu/translate

æ—¥æœ¬èªã®ç‹¬ã‚Šè¨€ã‚’è‹±èªã«ç¿»è¨³ã—ã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "text": "ä»Šæ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã€ã‚ã£ã¡ã‚ƒã†ã¾ãã„ã£ãŸï¼"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "english_text": "Today's presentation went incredibly well! I'm feeling absolutely amazing!"
}
```

### POST /api/butsubutsu/speak

è‹±èªãƒ†ã‚­ã‚¹ãƒˆã‚’éŸ³å£°ï¼ˆMP3ï¼‰ã«å¤‰æ›ã—ã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "text": "Today's presentation went incredibly well!"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "audio_content": "BASE64_ENCODED_MP3_DATA..."
}
```

## ğŸ¨ æŠ€è¡“çš„ãªå·¥å¤«

### 1. ã‚ã„ã¾ã„ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°åˆ¤å®š

ãƒ¬ãƒ¼ãƒ™ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³è·é›¢ã‚’ç”¨ã„ãŸé¡ä¼¼åº¦åˆ¤å®šã«ã‚ˆã‚Šã€å®Œç’§ã˜ã‚ƒãªãã¦ã‚‚85%ä»¥ä¸Šã®é¡ä¼¼åº¦ã§åˆæ ¼åˆ¤å®šã€‚

```javascript
function getSimilarity(str1, str2) {
    const maxLength = Math.max(str1.length, str2.length);
    if (maxLength === 0) return 1.0;
    const distance = levenshtein(str1, str2);
    return 1.0 - (distance / maxLength);
}

// 85%ä»¥ä¸Šã§åˆæ ¼
if (similarity >= 0.85) {
    // Perfect Howling! ğŸ‰
}
```

**åŠ¹æœ:**
- ã€Œmeetingã€ã‚’ã€Œmeetinã€ã¨ç™ºéŸ³ã—ã¦ã‚‚åˆæ ¼ï¼ˆé¡ä¼¼åº¦92%ï¼‰
- åˆå¿ƒè€…ã§ã‚‚æŒ«æŠ˜ã—ãªã„å„ªã—ã„åˆ¤å®š

### 2. Firestoreã‚­ãƒ£ãƒƒã‚·ãƒ¥

åŒã˜å…¥åŠ›ã¯2å›ç›®ä»¥é™ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å³åº§ã«è¿”å´ã€‚

```python
# SHA-256ã§ãƒãƒƒã‚·ãƒ¥åŒ–
doc_id = hashlib.sha256(request.text.encode("utf-8")).hexdigest()
doc_ref = db.collection("wolf_translations").document(doc_id)

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥HITæ™‚ã¯å³è¿”å´
if doc.exists:
    return {"english_text": doc.to_dict()["english_text"]}
```

**åŠ¹æœ:**
- 1å›ç›®: Gemini APIå‘¼ã³å‡ºã—ï¼ˆ0.5ã€œ1ç§’ï¼‰
- 2å›ç›®ä»¥é™: Firestoreã‹ã‚‰å³è¿”å´ï¼ˆ0.1ç§’ä»¥ä¸‹ï¼‰
- ã‚³ã‚¹ãƒˆ: åŒã˜è¡¨ç¾ãªã‚‰2å›ç›®ä»¥é™ã¯å®Œå…¨ç„¡æ–™

### 3. Geminiãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ

ã€Œæ­£ç¢ºæ€§ã€ã¨ã€Œã‚¯ãƒ¼ãƒ«ã•ã€ã®ä¸¡ç«‹ã‚’å®Ÿç¾ã€‚

```python
prompt = f"""
CRITICAL: The English translation MUST preserve the ORIGINAL MEANING of the user's input.
The priority is:
1. Accuracy of Meaning (Most Important)
2. Cool/Wolf Tone (Secondary)
"""
```

**ãƒã‚¤ãƒ³ãƒˆ:**
- `temperature: 0.7` â†’ ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã™ããšã€æ­£ç¢ºæ€§ã‚’ä¿ã¤
- æ„å‘³ã®æ­£ç¢ºæ€§ã‚’æœ€å„ªå…ˆã¨æ˜è¨˜

## ğŸ’° ã‚³ã‚¹ãƒˆã«ã¤ã„ã¦

å€‹äººåˆ©ç”¨ã®ç¯„å›²ã§ã‚ã‚Œã°ã€**ã»ã¼ç„¡æ–™ï¼ˆ0å††ï¼‰**ã§é‹ç”¨å¯èƒ½ã§ã™ã€‚

### ç„¡æ–™æ 

| ã‚µãƒ¼ãƒ“ã‚¹ | ç„¡æ–™æ  |
|---------|--------|
| Gemini 2.5 Flash | 15 Request/åˆ†ã€1æ—¥1,500 Request |
| Text-to-Speech (Journey) | æ¯æœˆ50ä¸‡æ–‡å­— |
| Firestore | èª­ã¿å–ã‚Š: 50,000å›/æ—¥<br>æ›¸ãè¾¼ã¿: 20,000å›/æ—¥ |

**Firestoreã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®åŠ¹æœ:**
- åŒã˜è¡¨ç¾ãªã‚‰2å›ç›®ä»¥é™ã¯å®Œå…¨ç„¡æ–™
- 1æ—¥100å›é å ãˆã—ã¦ã‚‚ç„¡æ–™æ ã«åã¾ã‚‹

## ğŸš¢ ãƒ‡ãƒ—ãƒ­ã‚¤

### Google Cloud Run ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
gcloud builds submit --tag gcr.io/[PROJECT-ID]/wolf-shadowing

# Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud run deploy wolf-shadowing \
  --image gcr.io/[PROJECT-ID]/wolf-shadowing \
  --platform managed \
  --region asia-northeast1 \
  --allow-unauthenticated
```

## ğŸ“ é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

- [ ] å±¥æ­´æ©Ÿèƒ½ï¼ˆéå»ã«é å ãˆã—ãŸè‹±èªã‚’å¾©ç¿’ï¼‰
- [ ] ã‚¹ãƒ”ãƒ¼ã‚­ãƒ³ã‚°ãƒ¬ãƒ™ãƒ«åˆ¤å®š
- [ ] PWAåŒ–ï¼ˆã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã«ï¼‰
- [ ] å¤šè¨€èªå¯¾å¿œï¼ˆè‹±èªä»¥å¤–ã®è¨€èªã‚‚å­¦ç¿’å¯èƒ½ã«ï¼‰

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³


1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add some amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é–‹ã

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯[MIT License](LICENSE)ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚




## ğŸ‘¤ ä½œè€…

**miki-mini**
