<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚­ãƒ„ãƒã®å‹•ç”»è¦ç´„ ğŸ¦Š</title>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Kosugi Maru', sans-serif;
            background-color: #fce4ec;
            /* Pinkish background */
            background-image: linear-gradient(135deg, #fce4ec 25%, #f8bbd0 25%, #f8bbd0 50%, #fce4ec 50%, #fce4ec 75%, #f8bbd0 75%, #f8bbd0 100%);
            background-size: 40px 40px;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        .neumorphic-input {
            background: #e0e5ec;
            box-shadow: inset 5px 5px 10px #b8b9be, inset -5px -5px 10px #ffffff;
            border: none;
            color: #4a5568;
        }

        .btn-fox {
            background: linear-gradient(90deg, #FF9A9E 0%, #FECFEF 99%, #FECFEF 100%);
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .btn-fox:hover {
            transform: scale(1.05);
        }

        .summary-box {
            white-space: pre-wrap;
            line-height: 1.8;
        }
    </style>
</head>

<body class="min-h-screen p-4 flex items-center justify-center">

    <div class="glass-panel w-full max-w-2xl rounded-3xl p-8 relative overflow-hidden">
        <!-- Decoration -->
        <div class="absolute -top-10 -right-10 text-9xl opacity-20 transform rotate-12 select-none">ğŸ¦Š</div>

        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-pink-600 mb-2">FOX SUMMARY</h1>
            <p class="text-gray-500 text-sm">å‹•ç”»URLã‚’å…¥ã‚Œã‚‹ã¨ã‚­ãƒ„ãƒå…ˆç”ŸãŒè¦ç´„ã™ã‚‹ã‚³ãƒ³ï¼</p>
        </div>

        <div class="flex flex-col gap-4 mb-6">
            <input type="text" id="urlInput" placeholder="ã“ã“ã«YouTubeã®URLã‚’è²¼ã‚‹ã‚³ãƒ³ (https://...)"
                class="neumorphic-input w-full p-4 rounded-xl focus:outline-none text-lg">

            <button onclick="summarize()" id="submitBtn"
                class="btn-fox w-full py-4 rounded-xl font-bold text-xl shadow-lg">
                è¦ç´„ã™ã‚‹ï¼ ğŸ“š
            </button>
        </div>

        <div id="resultArea" class="hidden animate-fade-in-up">
            <div class="border-t-2 border-pink-100 my-6"></div>
            <div class="bg-white/50 rounded-xl p-6 shadow-inner">
                <div id="summaryContent" class="summary-box text-gray-700"></div>
            </div>
        </div>

        <div id="loading" class="hidden text-center py-8">
            <div class="inline-block animate-spin text-4xl mb-2">ğŸ¦Š</div>
            <p class="text-pink-400 font-bold">å‹•ç”»ã‚’è¦‹ã¦ã‚‹ã‚³ãƒ³...ã¡ã‚‡ã£ã¨å¾…ã¤ã‚³ãƒ³...</p>
        </div>

    </div>

    <script>
        async function summarize() {
            const url = document.getElementById('urlInput').value.trim();
            if (!url) {
                alert('URLãŒãªã„ã‚³ãƒ³ï¼');
                return;
            }

            const btn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const resultArea = document.getElementById('resultArea');
            const content = document.getElementById('summaryContent');

            btn.disabled = true;
            btn.classList.add('opacity-50');
            loading.classList.remove('hidden');
            resultArea.classList.add('hidden');
            content.textContent = '';

            try {
                const res = await fetch('/api/fox/summary', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url: url })
                });

                const data = await res.json();

                if (data.status === 'success') {
                    content.textContent = data.summary;
                    resultArea.classList.remove('hidden');
                } else {
                    alert(data.message || 'å¤±æ•—ã—ãŸã‚³ãƒ³...');
                }

            } catch (e) {
                console.error(e);
                alert('é€šä¿¡ã‚¨ãƒ©ãƒ¼ã ã‚³ãƒ³...');
            } finally {
                btn.disabled = false;
                btn.classList.remove('opacity-50');
                loading.classList.add('hidden');
            }
        }
    </script>
</body>

</html>